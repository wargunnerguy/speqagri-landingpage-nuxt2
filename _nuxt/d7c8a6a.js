(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{442:function(t,e,n){var content=n(455);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(91).default)("79e604f8",content,!0,{sourceMap:!1})},454:function(t,e,n){"use strict";n(442)},455:function(t,e,n){var r=n(90)(!1);r.push([t.i,"#map[data-v-079986a3]{width:100%;height:300px}",""]),t.exports=r},464:function(t,e,n){"use strict";n.r(e);var r=n(157),o=(n(12),n(31),function t(a,b){if(a===b)return!0;if(a&&b&&"object"==typeof a&&"object"==typeof b){if(a.constructor!==b.constructor)return!1;var e,i,n;if(Array.isArray(a)){if((e=a.length)!=b.length)return!1;for(i=e;0!=i--;)if(!t(a[i],b[i]))return!1;return!0}if(a.constructor===RegExp)return a.source===b.source&&a.flags===b.flags;if(a.valueOf!==Object.prototype.valueOf)return a.valueOf()===b.valueOf();if(a.toString!==Object.prototype.toString)return a.toString()===b.toString();if((e=(n=Object.keys(a)).length)!==Object.keys(b).length)return!1;for(i=e;0!=i--;)if(!Object.prototype.hasOwnProperty.call(b,n[i]))return!1;for(i=e;0!=i--;){var r=n[i];if(!t(a[r],b[r]))return!1}return!0}return a!=a&&b!=b});const l="__googleMapsScriptId";var c;!function(t){t[t.INITIALIZED=0]="INITIALIZED",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILURE=3]="FAILURE"}(c||(c={}));class h{constructor({apiKey:t,channel:e,client:n,id:r=l,libraries:c=[],language:d,region:f,version:m,mapIds:v,nonce:y,retries:I=3,url:w="https://maps.googleapis.com/maps/api/js"}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.version=m,this.apiKey=t,this.channel=e,this.client=n,this.id=r||l,this.libraries=c,this.language=d,this.region=f,this.mapIds=v,this.nonce=y,this.retries=I,this.url=w,h.instance){if(!o(this.options,h.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(h.instance.options)}`);return h.instance}h.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url}}get status(){return this.errors.length?c.FAILURE:this.done?c.SUCCESS:this.loading?c.LOADING:c.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let t=this.url;return t+=`?callback=${this.CALLBACK}`,this.apiKey&&(t+=`&key=${this.apiKey}`),this.channel&&(t+=`&channel=${this.channel}`),this.client&&(t+=`&client=${this.client}`),this.libraries.length>0&&(t+=`&libraries=${this.libraries.join(",")}`),this.language&&(t+=`&language=${this.language}`),this.region&&(t+=`&region=${this.region}`),this.version&&(t+=`&v=${this.version}`),this.mapIds&&(t+=`&map_ids=${this.mapIds.join(",")}`),t}deleteScript(){const script=document.getElementById(this.id);script&&script.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise(((t,e)=>{this.loadCallback((n=>{n?e(n.error):t(window.google)}))}))}loadCallback(t){this.callbacks.push(t),this.execute()}setScript(){if(document.getElementById(this.id))return void this.callback();const t=this.createUrl(),script=document.createElement("script");script.id=this.id,script.type="text/javascript",script.src=t,script.onerror=this.loadErrorCallback.bind(this),script.defer=!0,script.async=!0,this.nonce&&(script.nonce=this.nonce),document.head.appendChild(script)}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(t){if(this.errors.push(t),this.errors.length<=this.retries){const t=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${t} ms.`),setTimeout((()=>{this.deleteScript(),this.setScript()}),t)}else this.onerrorEvent=t,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach((t=>{t(this.onerrorEvent)})),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}var d={name:"CalcMap",props:["quarryLocation","startingLocation","destinationLocation","timeToCalculate"],emits:["calculated-distance","calculated-user-distance"],data:function(){return{GOOGLE_API_KEY:"",enteredAddress:"",totalDistance:0,totalUserDistance:0}},methods:{searchAddressHandler:function(){var t=this;this.totalDistance=0,this.totalUserDistance=0,new h({apiKey:this.GOOGLE_API_KEY,version:"weekly",libraries:["places"]}).load().then((function(e){var n=new e.maps.DirectionsService,o=new e.maps.DirectionsRenderer,map=new e.maps.Map(document.getElementById("map"),{zoom:7,center:"Järvamaa"});o.setMap(map),n.route({origin:t.startingLocation,destination:t.startingLocation,waypoints:[{location:t.destinationLocation,stopover:!0},{location:t.quarryLocation,stopover:!0}],travelMode:"DRIVING"}).then((function(e){Object(r.a)(e.routes[0].legs).forEach((function(e){t.totalDistance+=e.distance.value/1e3})),t.$emit("calculated-distance",t.totalDistance)})).catch((function(t){return window.alert("Asukohapäring ebaõnnestus: proovi uuesti")})),n.route({origin:t.quarryLocation,destination:t.destinationLocation,travelMode:"DRIVING"}).then((function(e){Object(r.a)(e.routes[0].legs).forEach((function(e){t.totalUserDistance+=e.distance.value/1e3})),t.$emit("calculated-user-distance",t.totalUserDistance),o.setDirections(e)})).catch((function(t){console.log(t.message)}))})).catch((function(t){}))}},watch:{timeToCalculate:function(){this.searchAddressHandler()}}},f=(n(454),n(30)),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card"},[e("div",{attrs:{id:"map"}})])}],!1,null,"079986a3",null);e.default=component.exports}}]);